-- que haces mirando esto Silix...
local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera
local espEnabled = false
local fovEnabled = false
local aimbotEnabled = false
local fovSize = 200
local espObjects = {}
local dragging = false
local dragStart, startPos

local gui = Instance.new("ScreenGui")
gui.Name = "MinimalESPGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 180, 0, 100)
frame.Position = UDim2.new(0.02, 0, 0.85, 0)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BackgroundTransparency = 0
frame.Active = true
frame.Draggable = true
frame.Parent = gui

local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(20, 20, 20)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(60, 60, 60))
}
gradient.Parent = frame

local function makeButton(text, xPos, yPos)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 60, 0, 50)
	btn.Position = UDim2.new(0, xPos, 0, yPos)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.BackgroundTransparency = 0.5
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 16
	btn.Text = text
	btn.Parent = frame
	return btn
end

local espButton = makeButton("ESP", 0, 0)
local fovButton = makeButton("FOV", 60, 0)
local aimbotButton = makeButton("Aim", 120, 0)
local plusButton = makeButton("+", 0, 50)
local minusButton = makeButton("-", 60, 50)

local fovCircle = Instance.new("Frame")
fovCircle.Name = "FOVCircle"
fovCircle.Size = UDim2.new(0, fovSize * 2, 0, fovSize * 2)
fovCircle.AnchorPoint = Vector2.new(0.5, 0.5)
fovCircle.Position = UDim2.new(0.5, 0, 0.5, 0)
fovCircle.BackgroundTransparency = 1
fovCircle.Visible = false
fovCircle.Parent = gui

local stroke = Instance.new("UIStroke")
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(255, 255, 255)
stroke.Parent = fovCircle

local circleCorner = Instance.new("UICorner")
circleCorner.CornerRadius = UDim.new(1, 0)
circleCorner.Parent = fovCircle

local function createBillboard(target)
	if target:FindFirstChild("Head") then
		local billboard = Instance.new("BillboardGui")
		billboard.Name = "ESPTag"
		billboard.Adornee = target.Head
		billboard.AlwaysOnTop = true
		billboard.Size = UDim2.new(0, 200, 0, 50)
		billboard.StudsOffset = Vector3.new(0, 2.5, 0)

		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1, 0, 1, 0)
		label.BackgroundTransparency = 1
		label.TextColor3 = Color3.new(1, 1, 1)
		label.Font = Enum.Font.Gotham
		label.TextSize = 16
		label.TextStrokeTransparency = 0
		label.TextStrokeColor3 = Color3.new(0, 0, 0)
		label.Parent = billboard

		billboard.Parent = target
		espObjects[target] = label

		local highlight = Instance.new("Highlight")
		highlight.Name = "ESPHighlight"
		highlight.Adornee = target
		highlight.FillTransparency = 1
		highlight.OutlineTransparency = 0
		highlight.OutlineColor = Color3.fromRGB(255, 0, 0)
		highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
		highlight.Parent = target

		task.spawn(function()
			while espEnabled and target.Parent and target:FindFirstChild("HumanoidRootPart") do
				local dist = 0
				if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
					dist = math.floor((player.Character.HumanoidRootPart.Position - target.HumanoidRootPart.Position).Magnitude)
				end
				label.Text = string.format("%s [%dm]", target.Name, dist)
				task.wait(0.1)
			end
			if billboard then billboard:Destroy() end
			if highlight then highlight:Destroy() end
			espObjects[target] = nil
		end)
	end
end

local function toggleESP()
	espEnabled = not espEnabled
	for target, _ in pairs(espObjects) do
		if target:FindFirstChild("ESPTag") then
			target.ESPTag:Destroy()
		end
		if target:FindFirstChild("ESPHighlight") then
			target.ESPHighlight:Destroy()
		end
	end
	espObjects = {}

	if espEnabled then
		for _, obj in ipairs(workspace:GetDescendants()) do
			if obj:IsA("Model") and obj:FindFirstChildOfClass("Humanoid") and obj ~= player.Character then
				createBillboard(obj)
			end
		end
		workspace.DescendantAdded:Connect(function(obj)
			if espEnabled and obj:IsA("Model") and obj:FindFirstChildOfClass("Humanoid") and obj ~= player.Character then
				createBillboard(obj)
			end
		end)
	end
end
espButton.MouseButton1Click:Connect(toggleESP)

local function toggleFOV()
	fovEnabled = not fovEnabled
	fovCircle.Visible = fovEnabled
end
fovButton.MouseButton1Click:Connect(toggleFOV)

local function resizeFOV(increase)
	if not fovEnabled then return end
	if increase then
		fovSize += 20
	else
		fovSize = math.max(50, fovSize - 20)
	end
	fovCircle.Size = UDim2.new(0, fovSize * 2, 0, fovSize * 2)
end
plusButton.MouseButton1Click:Connect(function() resizeFOV(true) end)
minusButton.MouseButton1Click:Connect(function() resizeFOV(false) end)

local function toggleAimbot()
	aimbotEnabled = not aimbotEnabled
end
aimbotButton.MouseButton1Click:Connect(toggleAimbot)

local RunService = game:GetService("RunService")
RunService.RenderStepped:Connect(function()
	if aimbotEnabled then
		local bestTarget = nil
		local bestDist = math.huge
		local screenSize = camera.ViewportSize
		local center = screenSize / 2

		for _, obj in ipairs(workspace:GetDescendants()) do
			if obj:IsA("Model") and obj:FindFirstChildOfClass("Humanoid") and obj ~= player.Character and obj:FindFirstChild("Head") then
				local screenPos, onScreen = camera:WorldToViewportPoint(obj.Head.Position)
				if onScreen and screenPos.Z > 0 then
					local dist = (Vector2.new(screenPos.X, screenPos.Y) - center).Magnitude
					if dist <= fovSize and dist < bestDist then
						bestDist = dist
						bestTarget = obj
					end
				end
			end
		end

		if bestTarget then
			local targetPos = bestTarget.Head.Position
			local desiredCFrame = CFrame.lookAt(camera.CFrame.Position, targetPos)
			camera.CFrame = camera.CFrame:Lerp(desiredCFrame, 0.1)
		end
	end
end)
